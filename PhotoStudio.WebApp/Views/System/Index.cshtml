@{
    ViewBag.Title = "Index";
    Layout = "~/Views/Shared/_Layout.cshtml";
}
<script type="text/javascript">
    function SetRoot(data) {

        var serverData = data.split(':');
        if (serverData[0] == "ok") {
            $("#sussMsg").html("<div class=\"alert alert-success alert-dismissible\" role=\"alert\"><button type=\"button\" class=\"close\" data-dismiss=\"alert\"><span aria-hidden=\"true\">&times;</span><span class=\"sr-only\">Close</span></button><i class=\"fa fa-check-circle m-right-xs\"></i><strong>" + serverData[1] + "！</strong></div>");
        }
        else if (serverData[0] == "no") {
            $("#sussMsg").html("<div class=\"alert alert-danger alert-dismissible\" role=\"alert\"><button type=\"button\" class=\"close\" data-dismiss=\"alert\"><span aria-hidden=\"true\">&times;</span><span class=\"sr-only\">Close</span></button><i class=\"fa fa-times-circle m-right-xs\"></i> <strong>添加失败!</strong></div>");
        }
        else {
            $("#sussMsg").html("<div class=\"alert alert-warning alert-dismissible\" role=\"alert\"><button type=\"button\" class=\"close\" data-dismiss=\"alert\"><span aria-hidden=\"true\">&times;</span><span class=\"sr-only\">Close</span></button><i class=\"fa fa-exclamation-circle m-right-xs\"></i> <strong>系统繁忙！</strong></div>");
        }
    }
    function SetPower(data) {
        var serverData = data.split(':');
        if (serverData[0] == "ok") {
            $("#sussMsg2").html("<div class=\"alert alert-success alert-dismissible\" role=\"alert\"><button type=\"button\" class=\"close\" data-dismiss=\"alert\"><span aria-hidden=\"true\">&times;</span><span class=\"sr-only\">Close</span></button><i class=\"fa fa-check-circle m-right-xs\"></i><strong>" + serverData[1] + "！</strong></div>");
        }
        else if (serverData[0] == "no") {
            $("#sussMsg2").html("<div class=\"alert alert-danger alert-dismissible\" role=\"alert\"><button type=\"button\" class=\"close\" data-dismiss=\"alert\"><span aria-hidden=\"true\">&times;</span><span class=\"sr-only\">Close</span></button><i class=\"fa fa-times-circle m-right-xs\"></i> <strong>添加失败!</strong></div>");
        }
        else {
            $("#sussMsg2").html("<div class=\"alert alert-warning alert-dismissible\" role=\"alert\"><button type=\"button\" class=\"close\" data-dismiss=\"alert\"><span aria-hidden=\"true\">&times;</span><span class=\"sr-only\">Close</span></button><i class=\"fa fa-exclamation-circle m-right-xs\"></i> <strong>系统繁忙！</strong></div>");
        }
    }
</script>
<div class="padding-md">
    <h2 class="header-text">
        用户权限设置
        <span class="sub-header">
            System @ViewBag.UID
        </span>
    </h2>
    <div class="smart-widget widget-purple">
        <div class="smart-widget-header">
            权限分配
            <span class="smart-widget-option">
                <span class="refresh-icon-animated">
                    <i class="fa fa-circle-o-notch fa-spin"></i>
                </span>
                <a href="#" class="widget-toggle-hidden-option">
                    <i class="fa fa-cog"></i>
                </a>
                <a href="#" class="widget-collapse-option" data-toggle="collapse">
                    <i class="fa fa-chevron-up"></i>
                </a>
            </span>
        </div>
        <div class="smart-widget-inner">
            <div class="smart-widget-hidden-section">
                <ul class="widget-color-list clearfix">
                    <li style="background-color:#20232b;" data-color="widget-dark"></li>
                    <li style="background-color:#4c5f70;" data-color="widget-dark-blue"></li>
                    <li style="background-color:#23b7e5;" data-color="widget-blue"></li>
                    <li style="background-color:#2baab1;" data-color="widget-green"></li>
                    <li style="background-color:#edbc6c;" data-color="widget-yellow"></li>
                    <li style="background-color:#fbc852;" data-color="widget-orange"></li>
                    <li style="background-color:#e36159;" data-color="widget-red"></li>
                    <li style="background-color:#7266ba;" data-color="widget-purple"></li>
                    <li style="background-color:#f5f5f5;" data-color="widget-light-grey"></li>
                    <li style="background-color:#fff;" data-color="reset"></li>
                </ul>
            </div>
            <div class="smart-widget-body">
                <div id="sussMsg2"></div>
                @using (Ajax.BeginForm("SetPower", new { }, new AjaxOptions() { HttpMethod = "post", OnSuccess = "SetPower" }, new { id = "SetPower", @class = "form-horizontal" }))
                {
                    <div class="form-group">
                        <label class="col-md-2 col-md-offset-3 text-right">类型</label>
                        @Html.DropDownList("Type", (List<SelectListItem>)ViewBag.Type, new { @class = "col-md-6 form-control" });
                    </div>
                    <div class="form-group">
                        <label class="col-md-2 col-md-offset-3 text-right">权限名称</label>
                        @Html.DropDownList("name", (List<SelectListItem>)ViewBag.Name, new { @class = "col-md-6 form-control" });
                    </div>
                    <div class="form-group">
                        <label class="col-md-2 col-md-offset-3 text-right">赋予ID</label>
                        @Html.TextBox("ToID", "", new { @class = "col-md-6 form-control", @placeholder = "Root" })
                    </div>

                    <div class="form-group">
                        <div class="col-md-offset-5">
                            <button type="submit" class="btn btn-success">确定</button>
                            <button type="reset" class="btn btn-default">重置</button>
                        </div>
                    </div>
                }

            </div>
        </div><!-- ./smart-widget-inner -->
    </div><!-- ./smart-widget -->
    <div class="smart-widget m-top-lg widget-dark-blue">
        <div class="smart-widget-header">
            设置操作权限
            <span class="smart-widget-option">
                <span class="refresh-icon-animated">
                    <i class="fa fa-circle-o-notch fa-spin"></i>
                </span>
                <a href="#" class="widget-toggle-hidden-option">
                    <i class="fa fa-cog"></i>
                </a>
                <a href="#" class="widget-collapse-option" data-toggle="collapse">
                    <i class="fa fa-chevron-up"></i>
                </a>
            </span>
        </div>
        <div class="smart-widget-inner">
            <div class="smart-widget-hidden-section">
                <ul class="widget-color-list clearfix">
                    <li style="background-color:#20232b;" data-color="widget-dark"></li>
                    <li style="background-color:#4c5f70;" data-color="widget-dark-blue"></li>
                    <li style="background-color:#23b7e5;" data-color="widget-blue"></li>
                    <li style="background-color:#2baab1;" data-color="widget-green"></li>
                    <li style="background-color:#edbc6c;" data-color="widget-yellow"></li>
                    <li style="background-color:#fbc852;" data-color="widget-orange"></li>
                    <li style="background-color:#e36159;" data-color="widget-red"></li>
                    <li style="background-color:#7266ba;" data-color="widget-purple"></li>
                    <li style="background-color:#f5f5f5;" data-color="widget-light-grey"></li>
                    <li style="background-color:#fff;" data-color="reset"></li>
                </ul>
            </div>

            <div class="smart-widget-body">
                <div id="sussMsg"></div>
                @using (Ajax.BeginForm("SetRoot", new { }, new AjaxOptions() { HttpMethod = "post", OnSuccess = "SetRoot" }, new { id = "SetRoot", @class = "form-horizontal" }))
                {
                    <div class="form-group">
                        <label class="col-md-2 col-md-offset-3 text-right">权限名称</label>
                        @Html.TextBox("name", "", new { @class = "col-md-6 form-control", @placeholder = "name" })
                    </div>
                    <div class="form-group">

                        <label class="col-md-2 col-md-offset-3 text-right">可操作模块</label>
                        <div class="col-md-5 col-md-offset-5 text-left">
                            <div class="m-top-xs">
                                <div class="custom-checkbox">
                                    @Html.TextBox("chk1", "1", new { @class = "inbox-check", @type = "checkbox" })
                                    <label for="chk1"></label>
                                </div>
                                预约功能
                                <div class="custom-checkbox">
                                    @Html.TextBox("chk2", "2", new { @class = "inbox-check", @type = "checkbox" })
                                    <label for="chk2"></label>
                                </div>
                                订单跟进
                                <div class="custom-checkbox">
                                    @Html.TextBox("chk3", "3", new { @class = "inbox-check", @type = "checkbox" })
                                    <label for="chk3"></label>
                                </div>
                                相片上传
                            </div>
                            <div class="m-top-xs">
                                <div class="custom-checkbox">
                                    @Html.TextBox("chk4", "4", new { @class = "inbox-check", @type = "checkbox" })
                                    <label for="chk4"></label>
                                </div>
                                客户选片
                                <div class="custom-checkbox">
                                    @Html.TextBox("chk5", "5", new { @class = "inbox-check", @type = "checkbox" })
                                    <label for="chk5"></label>
                                </div>
                                历史订单
                                <div class="custom-checkbox">
                                    @Html.TextBox("chk6", "6", new { @class = "inbox-check", @type = "checkbox" })
                                    <label for="chk6"></label>
                                </div>
                                统计查询
                            </div>
                            <div class="m-top-xs">
                                <div class="custom-checkbox">
                                    @Html.TextBox("chk7", "7", new { @class = "inbox-check", @type = "checkbox" })
                                    <label for="chk7"></label>
                                </div>
                                客户档案
                                <div class="custom-checkbox">
                                    @Html.TextBox("chk8", "8", new { @class = "inbox-check", @type = "checkbox" })
                                    <label for="chk8"></label>
                                </div>
                                收支明细
                                <div class="custom-checkbox">
                                    @Html.TextBox("chk9", "9", new { @class = "inbox-check", @type = "checkbox" })
                                    <label for="chk9"></label>
                                </div>
                                商品入库
                            </div>
                            <div class="m-top-xs">
                                <div class="custom-checkbox">
                                    @Html.TextBox("chk10", "10", new { @class = "inbox-check", @type = "checkbox" })
                                    <label for="chk10"></label>
                                </div>
                                员工赏罚
                                <div class="custom-checkbox">
                                    @Html.TextBox("chk11", "11", new { @class = "inbox-check", @type = "checkbox" })
                                    <label for="chk11"></label>
                                </div>
                                信息提醒
                                <div class="custom-checkbox">
                                    @Html.TextBox("chk12", "12", new { @class = "inbox-check", @type = "checkbox" })
                                    <label for="chk12"></label>
                                </div>
                                商品修改
                            </div>
                            <div class="m-top-xs">
                                <div class="custom-checkbox">
                                    @Html.TextBox("chk13", "13", new { @class = "inbox-check", @type = "checkbox" })
                                    <label for="chk13"></label>
                                </div>
                                部门管理
                                <div class="custom-checkbox">
                                    @Html.TextBox("chk14", "14", new { @class = "inbox-check", @type = "checkbox" })
                                    <label for="chk14"></label>
                                </div>
                                员工管理
                                <div class="custom-checkbox">
                                    @Html.TextBox("chk15", "15", new { @class = "inbox-check", @type = "checkbox" })
                                    <label for="chk17"></label>
                                </div>
                                权限设置
                            </div>
                            <div class="m-top-xs">
                                <div class="custom-checkbox">
                                    @Html.TextBox("chk16", "16", new { @class = "inbox-check", @type = "checkbox" })
                                    <label for="chk16"></label>
                                </div>
                                数据备份恢复

                            </div>
                        </div>
                    </div>
                    <span id="result"></span>
                    <div class="form-group">
                        <div class="col-md-offset-5">
                            <button type="submit" class="btn btn-success">确定添加</button>
                            <button type="reset" class="btn btn-default">重置</button>
                        </div>
                    </div>
                }
            </div>
        </div><!-- ./smart-widget-inner -->
    </div><!-- ./smart-widget -->
    <div class="smart-widget widget-purple">
        <div class="smart-widget-header">
            现有操作权限
            <span class="smart-widget-option">
                <span class="refresh-icon-animated">
                    <i class="fa fa-circle-o-notch fa-spin"></i>
                </span>
                <a href="#" class="widget-toggle-hidden-option">
                    <i class="fa fa-cog"></i>
                </a>
                <a href="#" class="widget-collapse-option" data-toggle="collapse">
                    <i class="fa fa-chevron-up"></i>
                </a>
            </span>
        </div>
        <div class="smart-widget-inner">
            <div class="smart-widget-hidden-section">
                <ul class="widget-color-list clearfix">
                    <li style="background-color:#20232b;" data-color="widget-dark"></li>
                    <li style="background-color:#4c5f70;" data-color="widget-dark-blue"></li>
                    <li style="background-color:#23b7e5;" data-color="widget-blue"></li>
                    <li style="background-color:#2baab1;" data-color="widget-green"></li>
                    <li style="background-color:#edbc6c;" data-color="widget-yellow"></li>
                    <li style="background-color:#fbc852;" data-color="widget-orange"></li>
                    <li style="background-color:#e36159;" data-color="widget-red"></li>
                    <li style="background-color:#7266ba;" data-color="widget-purple"></li>
                    <li style="background-color:#f5f5f5;" data-color="widget-light-grey"></li>
                    <li style="background-color:#fff;" data-color="reset"></li>
                </ul>
            </div>
            <div class="smart-widget-body">
                <table class="table table-striped table-bordered" id="dataTable">
                    <thead>
                        <tr class="bg-dark-blue">
                            <th>权限编号</th>
                            <th>权限名称</th>
                            <th>可操作模块称</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>888888</td>
                            <td>最高权限</td>
                            <td>可操作系统所有模块</td>
                        </tr>

                        @foreach (PhotoStudio.Model.Power n in ViewBag.power)
                        {
                            string[] app = n.Powers.Split(',');
                            <tr>
                                <td>@n.ID</td>
                                <td>@n.Name</td>

                                <td>|
                                    @for (int i = 0; i < app.Length-1; i++)
                                    {
                                        switch (app[i])
                                        {
                                            case "1": 
                                                @Html.Label("预约功能|")
                                                break;
                                            case "2":
                                                @Html.Label("订单跟进|")
                                                break;
                                            case "3":
                                                @Html.Label("相片上传|")
                                                break;
                                            case "4":
                                                @Html.Label("客户选片|")
                                                break;
                                            case "5":
                                                @Html.Label("历史订单|")
                                                break;
                                            case "6":
                                                @Html.Label("统计查询|")
                                                break;
                                            case "7":
                                                @Html.Label("客户档案|")
                                                break;
                                            case "8":
                                                @Html.Label("收支明细|")
                                                break;
                                            case "9":
                                                @Html.Label("商品入库|")
                                                break;
                                            case "10":
                                                @Html.Label("员工赏罚|")
                                                break;
                                            case "11":
                                                @Html.Label("信息提醒|")
                                                break;
                                            case "12":
                                                @Html.Label("商品修改|")
                                                break;
                                            case "13":
                                                @Html.Label("部门管理|")
                                                break;
                                            case "14":
                                                @Html.Label("员工管理|")
                                                break;
                                            case "15":
                                                @Html.Label("权限设置|")
                                                break;
                                            case "16":
                                                @Html.Label("数据备份恢复|")
                                                break;
                                        }
                              
                                    }
                                </td>

                            </tr>
                        }
                    </tbody>
                </table>

            </div>
        </div><!-- ./smart-widget-inner -->
    </div><!-- ./smart-widget -->
</div>